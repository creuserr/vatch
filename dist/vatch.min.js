async function Vatch(t){async function e(t){var e=await fetch(t);return await e.json()}function a(t){var e=t.toString().split("").map((function(t){return t.charCodeAt(0)})),a=[],r=null;return e.forEach((function(t){null==r?r=t:(a.push([r,t]),r=null)})),null!=r&&a.push([r,0]),a.map((function(t){return String.fromCharCode(function([t,e]){return.5*(t+e)*(t+e+1)+e}(t))})).join("")}function r(t){var e="";return t.split("").map((function(t){return function(t){var e=Math.floor((Math.sqrt(8*t+1)-1)/2),a=t-(e**2+e)/2;return[e-a,a]}(t.charCodeAt(0))})).forEach((function(t){t.forEach((function(t){0!=t&&(e+=String.fromCharCode(t))}))})),e}var n={cache:[],dataset:[],get(t){if(this.dataset.includes(t))return JSON.parse(r(this.cache.find((function(e){return e.title==`vdb-${btoa(t)}`})).description))},async set(t,r){r=a(JSON.stringify(r));var n=encodeURI(JSON.stringify([{tag:"p",children:[r]}]));if(this.dataset.includes(t)){var i=0,c=this.cache.find((function(e,a){e.title,btoa(escape(t));return 1==e&&(i=a),e})).path;o=await e(`https://api.telegra.ph/editPage?access_token=${this.access}&path=${c}&title=vdb-${btoa(t)}&content=${n}`);this.cache[i].description=r}else{var o;if(1!=(o=await e(`https://api.telegra.ph/createPage?access_token=${this.access}&title=vdb-${btoa(t)}&content=${n}`)).ok)throw o.error;this.cache.push({title:`vdb-${btoa(t)}`,path:o.result.path,description:r}),this.dataset.push(t)}}};if(null!=t){if(n.access=t,1!=(s=await e(`https://api.telegra.ph/getPageList?access_token=${t}`)).ok)throw s.error;var i=s.result.pages.filter((function(t){return t.title.startsWith("vdbx-")}))[0],c=JSON.parse(r(i.description));n.creation=c.creation,n.agent=c.agent,n.version=c.version,n.cache=s.result.pages,n.root=i}else{var o=function(t){var e=0;if(0==t.length)return 0;for(var a=0;a<t.length;a++)e=(e<<5)-e+t.charCodeAt(a),e|=0;return e.toString(16)}(Math.random().toString());if(1!=(s=await e(`https://api.telegra.ph/createAccount?short_name=vdbx-${o}`)).ok)throw s.error;n.access=s.result.access_token;var s,h=Date.now();if(1!=(s=await e(`https://api.telegra.ph/createPage?access_token=${n.access}&title=vdbx-${o}&content=${encodeURI(JSON.stringify([{tag:"p",children:[a(JSON.stringify({version:Vatch.version,agent:navigator.userAgent,creation:h}))]}]))}`)).ok)throw s.error;n.creation=h,n.agent=navigator.userAgent,n.version=Vatch.version,n.root=s.result}return n.cache.forEach((function(t){t.title.startsWith("vdbx-")||n.dataset.push(atob(t.title.replace(/vdb\-/,"")))})),n}Vatch.version=1;