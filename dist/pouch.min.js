async function Pouch(t){async function e(t){var e=await fetch(t);return await e.json()}function r(t){var e=t.toString().split("").map((function(t){return t.charCodeAt(0)})),r=[],a=null;return e.forEach((function(t){null==a?a=t:(r.push([a,t]),a=null)})),null!=a&&r.push([a,0]),r.map((function(t){return String.fromCharCode(function([t,e]){return.5*(t+e)*(t+e+1)+e}(t))})).join("")}function a(t){var e="";return t.split("").map((function(t){return function(t){var e=Math.floor((Math.sqrt(8*t+1)-1)/2),r=t-(e**2+e)/2;return[e-r,r]}(t.charCodeAt(0))})).forEach((function(t){t.forEach((function(t){0!=t&&(e+=String.fromCharCode(t))}))})),e}var n={cache:[],dataset:[],get(t){if(this.dataset.includes(t))return JSON.parse(a(this.cache.filter((function(e){return e.title==`pdl-${btoa(t)}`}))[0].description))},async set(t,a){a=r(JSON.stringify(a));var n=encodeURI(JSON.stringify([{tag:"p",children:[a]}]));if(this.dataset.includes(t)){var i=0,o=this.cache.filter((function(e,r){e.title,btoa(escape(t));return 1==e&&(i=r),e}))[0].path;c=await e(`https://api.telegra.ph/editPage?access_token=${this.access}&path=${o}&title=pdl-${btoa(t)}&content=${n}`);this.cache[i].description=a}else{var c;if(1!=(c=await e(`https://api.telegra.ph/createPage?access_token=${this.access}&title=pdl-${btoa(t)}&content=${n}`)).ok)throw c.error;this.cache.push({title:`pdl-${btoa(t)}`,path:c.result.path,description:a}),this.dataset.push(t)}}};if(null!=t){if(n.access=t,1!=(s=await e(`https://api.telegra.ph/getPageList?access_token=${t}`)).ok)throw s.error;var i=s.result.pages.filter((function(t){return t.title.startsWith("pdlx-")}))[0],o=JSON.parse(a(i.description));n.creation=o.creation,n.agent=o.agent,n.version=o.version,n.cache=s.result.pages,n.root=i}else{var c=function(t){var e=0;if(0==t.length)return 0;for(var r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e.toString(16)}(Math.random().toString());if(1!=(s=await e(`https://api.telegra.ph/createAccount?short_name=pdlx-${c}`)).ok)throw s.error;n.access=s.result.access_token;var s,h=Date.now();if(1!=(s=await e(`https://api.telegra.ph/createPage?access_token=${n.access}&title=pdlx-${c}&content=${encodeURI(JSON.stringify([{tag:"p",children:[r(JSON.stringify({version:Pouch.version,agent:navigator.userAgent,creation:h}))]}]))}`)).ok)throw s.error;n.creation=h,n.agent=navigator.userAgent,n.version=Pouch.version,n.root=s.result}return n.cache.forEach((function(t){t.title.startsWith("pdlx-")||n.dataset.push(atob(t.title.replace(/pdl\-/,"")))})),n}Pouch.version=1
